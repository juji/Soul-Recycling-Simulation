<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>localStorage Test for Soul Simulation</title>
    <style>
        body { 
            font-family: 'Courier New', monospace; 
            background: #111; 
            color: #fff; 
            padding: 20px; 
        }
        .test-section { 
            margin: 20px 0; 
            padding: 15px; 
            border: 1px solid #333; 
            border-radius: 8px; 
        }
        button { 
            background: #4a90e2; 
            color: white; 
            border: none; 
            padding: 8px 16px; 
            border-radius: 4px; 
            cursor: pointer; 
            margin: 5px; 
        }
        button:hover { background: #5ba0f2; }
        .current-values { 
            background: rgba(74, 144, 226, 0.1); 
            padding: 10px; 
            border-radius: 4px; 
            margin: 10px 0; 
        }
    </style>
</head>
<body>
    <h1>ðŸŒŒ Soul Simulation localStorage Test</h1>
    
    <div class="test-section">
        <h2>Current localStorage Values</h2>
        <div id="current-values" class="current-values">
            Loading...
        </div>
        <button onclick="refreshValues()">Refresh Values</button>
        <button onclick="clearAll()">Clear All</button>
    </div>
    
    <div class="test-section">
        <h2>Set Test Values</h2>
        <button onclick="setTestValues()">Set Test Values</button>
        <button onclick="setDefaultValues()">Set Default Values</button>
        <button onclick="setExtremeValues()">Set Extreme Values</button>
    </div>
    
    <div class="test-section">
        <h2>Instructions</h2>
        <ol>
            <li>Click "Set Test Values" to save some test data</li>
            <li>Go to the main simulation: <a href="http://localhost:5174/?val=333" target="_blank" style="color: #4a90e2;">http://localhost:5174/?val=333</a></li>
            <li>Check if the sliders show the test values and display "Settings loaded from storage" notification</li>
            <li>Adjust the sliders and close/reopen the tab to verify persistence</li>
            <li>Use "Reset to Defaults" button in the simulation to test the reset functionality</li>
        </ol>
    </div>

    <script>
        const STORAGE_KEYS = {
            SPAWN_RATE: 'soul_simulation_spawn_rate',
            MIN_LIFESPAN: 'soul_simulation_min_lifespan',
            MAX_LIFESPAN: 'soul_simulation_max_lifespan'
        };

        function refreshValues() {
            const values = {
                spawnRate: localStorage.getItem(STORAGE_KEYS.SPAWN_RATE) || 'Not set',
                minLifespan: localStorage.getItem(STORAGE_KEYS.MIN_LIFESPAN) || 'Not set',
                maxLifespan: localStorage.getItem(STORAGE_KEYS.MAX_LIFESPAN) || 'Not set'
            };
            
            document.getElementById('current-values').innerHTML = `
                <strong>Soul Spawn Rate:</strong> ${values.spawnRate}<br>
                <strong>Min Lifespan:</strong> ${values.minLifespan}<br>
                <strong>Max Lifespan:</strong> ${values.maxLifespan}<br>
                <small>Last updated: ${new Date().toLocaleTimeString()}</small>
            `;
        }

        function clearAll() {
            Object.values(STORAGE_KEYS).forEach(key => {
                localStorage.removeItem(key);
            });
            refreshValues();
            alert('All localStorage values cleared!');
        }

        function setTestValues() {
            localStorage.setItem(STORAGE_KEYS.SPAWN_RATE, '1.5');
            localStorage.setItem(STORAGE_KEYS.MIN_LIFESPAN, '200');
            localStorage.setItem(STORAGE_KEYS.MAX_LIFESPAN, '1200');
            refreshValues();
            alert('Test values set!\nSpawn Rate: 1.5\nMin Lifespan: 200\nMax Lifespan: 1200');
        }

        function setDefaultValues() {
            localStorage.setItem(STORAGE_KEYS.SPAWN_RATE, '0.4');
            localStorage.setItem(STORAGE_KEYS.MIN_LIFESPAN, '300');
            localStorage.setItem(STORAGE_KEYS.MAX_LIFESPAN, '900');
            refreshValues();
            alert('Default values set!');
        }

        function setExtremeValues() {
            localStorage.setItem(STORAGE_KEYS.SPAWN_RATE, '2.0');
            localStorage.setItem(STORAGE_KEYS.MIN_LIFESPAN, '100');
            localStorage.setItem(STORAGE_KEYS.MAX_LIFESPAN, '1500');
            refreshValues();
            alert('Extreme values set!');
        }

        // Initialize
        refreshValues();
        
        // Auto-refresh every 2 seconds to show live updates
        setInterval(refreshValues, 2000);
    </script>
</body>
</html>
