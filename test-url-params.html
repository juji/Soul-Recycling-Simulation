<!DOCTYPE html>
<html>
<head>
    <title>URL Parameter Test</title>
</head>
<body>
    <h1>URL Parameter Test</h1>
    <p>Current URL: <span id="current-url"></span></p>
    <p>Parsed value: <span id="parsed-value"></span></p>
    
    <h2>Test Cases:</h2>
    <ul>
        <li><a href="?val=333">val=333 (should return 333)</a></li>
        <li><a href="?val=3333">val=3333 (should return 3333)</a></li>
        <li><a href="?val=33333">val=33333 (should return 33333)</a></li>
        <li><a href="?val=100">val=100 (should return 333 - clamped min)</a></li>
        <li><a href="?val=50000">val=50000 (should return 33333 - clamped max)</a></li>
        <li><a href="?val=abc">val=abc (should return 333 - invalid)</a></li>
        <li><a href="?">No parameter (should return 333 - default)</a></li>
        <li><a href="?val=">val= (empty, should return 333)</a></li>
    </ul>

    <script>
        function getEntityCountFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const val = urlParams.get('val');
            
            if (val === null || val === '') {
                return 333; // Default value
            }
            
            const parsedVal = parseInt(val, 10);
            
            // Check if it's a valid number and clamp between 333 and 33333
            if (isNaN(parsedVal)) {
                return 333; // Default for invalid values
            }
            
            return Math.max(333, Math.min(33333, parsedVal));
        }

        document.getElementById('current-url').textContent = window.location.href;
        document.getElementById('parsed-value').textContent = getEntityCountFromURL();
    </script>
</body>
</html>
